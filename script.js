const displayInput = document.getElementById('display-input'); const buttons = document.querySelector('.buttons'); let currentInput = ''; let previousInput = ''; let operator = ''; let expression = ''; buttons.addEventListener('click', (event) => { if (event.target.tagName === 'BUTTON') { const value = event.target.textContent; if (/[0-9.]/.test(value)) { currentInput += value; expression += value; displayInput.value = expression; } else if (/[+\-*/]/.test(value)) { if (previousInput !== '') { calculate(); } else { previousInput = currentInput; } operator = value; expression += ` ${operator} `; currentInput = ''; displayInput.value = expression; } else if (value === '=') { calculate(); } else if (value === 'C') { clear(); } } }); function calculate() { if (previousInput && operator && currentInput) { try { const result = operate(parseFloat(previousInput), parseFloat(currentInput), operator); expression += ` ${currentInput} = ${result}`; displayInput.value = expression; currentInput = result.toString(); previousInput = ''; operator = ''; } catch (error) { displayInput.value = 'Error'; currentInput = ''; previousInput = ''; operator = ''; expression = ''; } } } function clear() { currentInput = ''; previousInput = ''; operator = ''; expression = ''; displayInput.value = ''; } function operate(a, b, op) { switch (op) { case '+': return a + b; case '-': return a - b; case '*': return a * b; case '/': return b === 0 ? Infinity : a / b; default: return NaN; } }